# よくある質問 ❓

### 1. なぜ私の話した言葉を、小智は韓国語、日本語、英語でたくさん認識するのですか？🇰🇷

提案：`models/SenseVoiceSmall`に`model.pt`ファイルが既にあるか確認してください。
なければダウンロードが必要です。こちらを参照してください[音声認識モデルファイルのダウンロード](Deployment.md#モデルファイル)

### 2. なぜ「TTSタスクエラー ファイルが存在しません」と表示されるのですか？📁

提案：`conda`を使用して`libopus`と`ffmpeg`ライブラリが正しくインストールされているか確認してください。

インストールされていない場合は、インストールしてください。

```
conda install conda-forge::libopus
conda install conda-forge::ffmpeg
```

### 3. TTSが頻繁に失敗し、タイムアウトします ⏰

提案：`EdgeTTS`が頻繁に失敗する場合は、まずプロキシ（梯子）を使用しているか確認してください。使用している場合は、プロキシを無効にしてから再試行してください。
もし火山エンジンの豆包TTSを使用していて頻繁に失敗する場合は、有料版の使用をお勧めします。テスト版は2並列処理しかサポートしていません。

### 4. Wi-Fiでは自作サーバーに接続できますが、4Gモードでは接続できません 🔐

原因：虾哥のファームウェアでは、4Gモードで安全な接続を使用する必要があります。

解決策：現在、2つの解決策があります。どちらかを選択してください：

1. コードを修正する。このビデオを参考に解決してください https://www.bilibili.com/video/BV18MfTYoE85

2. nginxを使用してSSL証明書を設定する。チュートリアルを参照してください https://icnt94i5ctj4.feishu.cn/docx/GnYOdMNJOoRCljx1ctecsj9cnRe

### 5. 小智の対話応答速度を向上させるにはどうすればよいですか？ ⚡

このプロジェクトのデフォルト設定は低コストのソリューションです。初心者はまずデフォルトの無料モデルを使用して「動作する」問題を解決し、その後「高速に動作する」ように最適化することをお勧めします。
応答速度を向上させる必要がある場合は、各コンポーネントを交換してみてください。以下は、各コンポーネントの応答速度テストデータです（参考用であり、保証するものではありません）：

| 影響要因 | 値 |
|:---:|:---:|
| テスト場所 | 広東省広州市海珠区 |
| テスト時間 | 2025年2月19日 12:52 |
| ブロードバンド事業者 | 中国聯通 |

テスト方法：

1. 各コンポーネントのキーを設定します。キーが設定されたコンポーネントのみがテストに参加します。

2. キーを設定した後、以下の方法を実行します。

```
# プロジェクトのルートディレクトリに入り、以下のコマンドを実行します：
conda activate xiaozhi-esp32-server
python performance_tester.py
```

生成されるレポートは以下の通りです

LLMパフォーマンスランキング:

| モジュール名 | 平均初回トークン時間 | 平均総応答時間 |
|:---:|:---:|:---:|
| AliLLM | 0.547s | 1.485s |
| ChatGLMLLM | 0.677s | 3.057s |

TTSパフォーマンスランキング:

| モジュール名 | 平均合成時間 |
|---|---|
| EdgeTTS | 1.019s |
| DoubaoTTS | 0.503s |
| CosyVoiceSiliconflow | 3.732s |

推奨構成の組み合わせ（総合的な応答速度）:

| 組み合わせ案 | 総合スコア | LLM初回トークン | TTS合成 |
|---|---|---|---|
| AliLLM + DoubaoTTS | 0.539 | 0.547s | 0.503s |
| AliLLM + EdgeTTS | 0.642 | 0.547s | 1.019s |
| ChatGLMLLM + DoubaoTTS | 0.642 | 0.677s | 0.503s |
| ChatGLMLLM + EdgeTTS | 0.745 | 0.677s | 1.019s |
| AliLLM + CosyVoiceSiliconflow | 1.184 | 0.547s | 3.732s |

### 結論 🔍

`2025年2月19日`、もし私のコンピュータが`広東省広州市海珠区`にあり、`中国聯通`ネットワークを使用している場合、私は優先的に以下を使用します：

- LLM：`AliLLM`
- TTS：`DoubaoTTS`

### 6. 話すのが遅く、間が空くと小智が割り込んで話してしまいます 🗣️

提案：設定ファイルで以下の部分を見つけ、`min_silence_duration_ms`の値を大きくします（例：`1000`に変更）：

```yaml
VAD:
  SileroVAD:
    threshold: 0.5
    model_dir: models/snakers4_silero-vad
    min_silence_duration_ms: 700 # 話の間が長い場合は、この値を大きくしてください
```

### 7. 小智を使って照明、エアコン、リモートでの電源オン/オフなどを操作したい 💡

チュートリアルを参照してください[ESP32デバイスとHomeAssistantの統合ガイド](./homeassistant-integration.md)

### 8. スマートコントロールパネルの携帯電話登録を有効にする方法 📱

チュートリアルを参照してください[Aliyun SMS統合ガイド](./ali-sms-integration.md)

### 9. 写真を撮って物体を認識する視覚モデルを有効にする方法 📷

チュートリアルを参照してください[視覚モデル使用ガイド](./mcp-vision-integration.md)

### 10. その他の問題については、フィードバックをお寄せください 💬

[issues](https://github.com/xinnan-tech/xiaozhi-esp32-server/issues)で問題を提出できます。

また、メールでのお問い合わせも可能です：huangrongzhuang@xin-nan.com